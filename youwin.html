<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>You Win!</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div id="win-screen">
        <h1 class="win-title">ğŸ‰ You Winï¼ ğŸ‰</h1>
        <img src="images/trophy.png" alt="Trophy" class="floating">
        <p class="click-text">ğŸ‚ ç‚¹å‡»è›‹ç³• ğŸ‚</p>
        <img src="images/cake.png" alt="Cake" id="cake" onclick="triggerMagic()">
        <p id="birthday-message" class="hidden">ğŸ‰ ç”Ÿæ—¥å¿«ä¹ï¼Œå°§å§ï¼ ğŸ‰</p>
    </div>

    <!-- æ·»åŠ æ¢¦å¹»ç‰¹æ•ˆçš„å®¹å™¨ -->
    <div id="magic-container"></div>

    <script>
        function triggerMagic() {
            let message = document.getElementById("birthday-message");
            let cake = document.getElementById("cake");

            // è®©è›‹ç³•è·³åŠ¨ä¸€ä¸‹
            cake.classList.add("bounce");

            // **ç«‹å³** è®©æ–‡å­—æ˜¾ç¤º
            message.classList.remove("hidden");
            message.style.display = "block";
            message.style.opacity = "1";

            // æ·»åŠ æ¸å˜åŠ¨ç”»
            message.classList.add("fade-in");

            createMagicParticles(cake);
        }

        function createMagicParticles(element) {
            let magicContainer = document.getElementById("magic-container");
            magicContainer.innerHTML = ""; // æ¸…ç©ºä¹‹å‰çš„ç²’å­

            let maxParticles = 1500;  // **ğŸ”¥ è¿™é‡Œæ§åˆ¶ç²’å­æ•°é‡**
            let maxSpeed = 1000;  // **ğŸ”¥ è¿™é‡Œæ§åˆ¶ç²’å­é£è¡Œè·ç¦»**
            let minSpeed = 100;  // **ğŸ”¥ è¿™é‡Œæ§åˆ¶æœ€å°ç²’å­æ‰©æ•£èŒƒå›´**
			
            for (let i = 0; i < maxParticles; i++) { // ğŸ”¥ å¢åŠ ç²’å­æ•°é‡
                let particle = document.createElement("div");
                particle.classList.add("magic-particle");

                // è®¡ç®—è›‹ç³•çš„ä¸­å¿ƒä½ç½®
                let rect = element.getBoundingClientRect();
                let x = rect.left + rect.width / 2;
                let y = rect.top + rect.height / 2;

                particle.style.left = `${x}px`;
                particle.style.top = `${y}px`;

                // **å¢å¤§ç²’å­æ‰©æ•£èŒƒå›´**
                let angle = Math.random() * 360;
                let speed = Math.random() * 30 + 100; // ğŸ”¥ å¢åŠ é€Ÿåº¦ & æ‰©æ•£èŒƒå›´
                let velocityX = Math.cos(angle) * speed;
                let velocityY = Math.sin(angle) * speed;

                // æ·»åŠ åŠ¨ç”»
                particle.style.setProperty("--vx", velocityX + "px");
                particle.style.setProperty("--vy", velocityY + "px");

                magicContainer.appendChild(particle);

                // 3 ç§’åç§»é™¤ç²’å­
                setTimeout(() => {
                    particle.remove();
                }, 4000);
            }
        }
    </script>

</body>
</html>
